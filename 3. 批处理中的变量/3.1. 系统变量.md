## 3.1. 系统变量

他们的值由系统将其根据事先定义的条件自动赋值，也就是这些变量系统已经给他们定义了值，不需要我们来给他赋值，我们只需要调用。把他们全部列出来：

* %ALLUSERSPROFILE% 本地 返回“所有用户”配置文件的位置。
* %APPDATA% 本地 返回默认情况下应用程序存储数据的位置。
* %CD% 本地 返回当前目录字符串。
* %CMDCMDLINE% 本地 返回用来启动当前的 Cmd.exe 的准确命令行。
* %CMDEXTVERSION% 系统 返回当前的“命令处理程序扩展”的版本号。
* %COMPUTERNAME% 系统 返回计算机的名称。
* %COMSPEC% 系统 返回命令行解释器可执行程序的准确路径。
* %DATE% 系统 返回当前日期。使用与 date /t 命令相同的格式。由 Cmd.exe 生成。有关 date 命令的详细信息，请参阅 Date。
* %ERRORLEVEL% 系统 返回上一条命令的错误代码。通常用非零值表示错误。
* %HOMEDRIVE% 系统 返回连接到用户主目录的本地工作站驱动器号。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。
* %HOMEPATH% 系统 返回用户主目录的完整路径。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。
* %HOMESHARE% 系统 返回用户的共享主目录的网络路径。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。
* %LOGONSERVER% 本地 返回验证当前登录会话的域控制器的名称。
* %NUMBER_OF_PROCESSORS% 系统 指定安装在计算机上的处理器的数目。
* %OS% 系统 返回操作系统名称。Windows 2000 显示其操作系统为 Windows_NT。
* %PATH% 系统 指定可执行文件的搜索路径。
* %PATHEXT% 系统 返回操作系统认为可执行的文件扩展名的列表。
* %PROCESSOR_ARCHITECTURE% 系统 返回处理器的芯片体系结构。值：x86 或 IA64基于Itanium
* %PROCESSOR_IDENTFIER% 系统 返回处理器说明。
* %PROCESSOR_LEVEL% 系统 返回计算机上安装的处理器的型号。
* %PROCESSOR_REVISION% 系统 返回处理器的版本号。
* %PROMPT% 本地 返回当前解释程序的命令提示符设置。由 Cmd.exe 生成。
* %RANDOM% 系统 返回 0 到 32767 之间的任意十进制数字。由 Cmd.exe 生成。
* %SYSTEMDRIVE% 系统 返回包含 Windows server operating system 根目录（即系统根目录）的驱动器。
* %SYSTEMROOT% 系统 返回 Windows server operating system 根目录的位置。
* %TEMP% 和 %TMP% 系统和用户 返回对当前登录用户可用的应用程序所使用的默认临时目录。有些应用程序需要 TEMP，而其他应用程序则需要 TMP。
* %TIME% 系统 返回当前时间。使用与 time /t 命令相同的格式。由 Cmd.exe 生成。有关 time 命令的详细信息，请参阅 Time。
* %USERDOMAIN% 本地 返回包含用户帐户的域的名称。
* %USERNAME% 本地 返回当前登录的用户的名称。
* %USERPROFILE% 本地 返回当前用户的配置文件的位置。
* %WINDIR% 系统 返回操作系统目录的位置。

这么多系统变量，我们如何知道他的值是什么呢？

在CMD里输入`echo %WINDIR%`，就能显示一个变量的值了。

举个实际例子，比如我们要复制文件到当前帐号的启动目录里就可以这样：

```
copy d:\1.bat "%USERPROFILE%\「开始」菜单\程序\启动\"
```

注意有空格的目录要用引号引起来。

笔者注：系统版本不同，以上目录可能有所不同。

另外还有一些系统变量，他们是代表一个意思，或者一个操作：

他们分别是`%0` `%1` `%2` `%3` `%4` `%5`...一直到`%9`还有一个`%*`

* %0 这个有点特殊，有几层意思，先讲 %1-%9 的意思
* %1 返回批处理的第一个参数
* %2 返回批处理的第二个参数
* %3-%9 依此推类

反回批处理参数，到底怎么个返回法？

看这个例子，把下面的代码保存为test.bat然后放到C盘下：

```
@echo off
echo %1 %2 %3 %4
echo %1
echo %2
echo %3
echo %4
```

进入CMD，输入`cd c:\`

然后输入`test.bat 参数1 参数2 参数3 参数4`

注意中间的空格，我们会看到这样的结果：

```
参数1 参数2 参数3 参数4
参数1
参数2
参数3
参数4
```

对比下代码,`%1`就是“参数1”，`%2`就是“参数2”以此类推。

这些`%1`和`%9`可以让批处理也能带参数运行，大大提高批处理功能。

还有一个`%*`，作用是返回参数，不过它是一次返回全部参数的值，不用在输入`%1` `%2`来确定一个一个的值。例：

```
@echo off
echo %*
```

同样保存为test.bat放到C盘

进入CMD，输入`cd c:\`

然后输入`test.bat 参数1 参数2 参数3 参数4`

可以看到他一次把全部参数都显示出来了

现在讲比较特殊的`%0`

`%0`这个不是返回参数的值了，他有两层意思：

**第一层意思:返回批处理所在绝对路径**

例：

```
@echo off
echo %0
pause
```

保存为test.bat放在D:\运行，会显示如下结果：

```
D:\test.bat
请按任意键继续
```

它把当前批处理执行的所在路经打印出来了，这就是返回批处理所在绝对路径的意思。

**第二层意思:无限循环执行BAT**

例：

```
@echo off
net user
%0
```

保存为BAT执行，他就会无限循环执行net user这条命令，直到你手动停止。

其实`%0`就是第一参数`%1`前面那个参数，当然就是批处理文件名（包括路径）。

以上就是批处理中的一些系统变量，另外还有一些变量，他们也表示一些功能，FOR命令中的那些就是，[FOR变量](../2. FOR命令详解/2.2. FOR命令中的变量.html)已经说过，就不讲了。